const fs = require('fs')
const resolve = require('path').resolve

exports.generatedMessage = 'Generated by ghooks. Do not edit this file.'

exports.content = fs
  .readFileSync(resolve(`${__dirname}/hook.template.raw`), 'UTF-8')
  .replace('{{generated_message}}', exports.generatedMessage)

exports.getContent = (config = {}) => {
  return exports.content
    .replace(/\/\/\s*{{generated_config_start}}[^]+{{generated_config_end}}/g, 'return ' + JSON.stringify(config))
}
